# 【补充篇】vite 处理跨域

同源策略【仅在浏览器发生，是浏览器的规则】：http 交互默认情况下只能在同协议、同域名、同端口的两台终端进行

https://www.baidu.com:443/index.html（我家）

尝试去拿（调用浏览器的网络模块-----> 网卡）

发送请求的时候是不可能拦截的。因为他不确保请求的服务器地址允不允许跨域

---- 浏览器（相当于是保安）----（心想：你一个百度的你找 360 要东西？你得到人家允许了嘛？）响应到来以后 360 没有特殊强调说百度是自己的朋友 那浏览器说不好意思了 你拿不到，同时通知一下百度说：人家 360 没说你是他朋友，如果你想要的话，你去和他私下聊聊 让他来证明你是他朋友，这时候我再把东西给你

放行：请求开始传输 达到 360 服务器

第一种情况：响应（360 和浏览器说百度是自己的老朋友 ）

第二种情况：响应（360 有点憨，只要是个请求过来 他都会把响应给出去，但是如果是朋友的话，他会额外加个标记(比如：Access-Control-Allow-Origin)

**跨域限制是服务器已经响应了东西，但是浏览器不给你，不是说服务器没响应东西**

https://www.360.com:443/api/getUserInfo（你家）门锁 人脸识别

跨域【仅发生在浏览器】：当 A 源浏览器的网页 向 B 源的服务器地址（不满足同源策略，满足同源限制）请求对应信息，就会产生跨域，跨域请求默认情况下会被浏览器拦截，除非对应的请求服务器出具标记说这个 A 源是允许拿 B 源的东西

解决方案：

- 开发时态：我们一般就利用 构建工具或者脚手架或者第三方库的 proxy 代理配置 或者我们自己搭一个开发服务器来解决这个问题

- 生产时态：我们一般是交给后端去处理跨域的（后端或者运维做的）：（一般不会出现跨域的问题）
  - ngnix：代理服务 本质的原理就是和我们本地开发 vite 服务器做跨域是一样的
  - 配置身份标记
    - Access-Control-Allow-Origin:代表哪些域是我的朋友，标记了朋友以后，浏览器就不会拦截

https://www.bytedance.com dist 目录完全给后端或者运维

帮我们的后端服务 + 前端代码 放到一个域下面的

https://www.bytedance.com/api/getUserInfo
https://www.bytedance.com/dist/index.html

跨部门的时候 百度 百度百科 百度文库

百度百科 https://www/baike.baidu.com

用户信息 https://baidu.com/api/userInfo

总公司一样，但是给分公司配置了【身份标记】，所以就可以跨域
